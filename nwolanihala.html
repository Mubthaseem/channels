<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>nihala's thenga</title>
  <style>
    :root{--bg:#fff7e6;--card:#ffffff;--accent:#3b82f6;--dark:#1f2937}
    *{box-sizing:border-box;font-family:Inter,system-ui,Segoe UI,Roboto,Arial}
    body{margin:0;background:linear-gradient(180deg,var(--bg),#fff);display:flex;align-items:center;justify-content:center;min-height:100vh;color:var(--dark)}
    .wrap{width:920px;max-width:95%;display:grid;grid-template-columns:1fr 320px;gap:24px;align-items:center}
    .card{background:var(--card);border-radius:14px;padding:18px;box-shadow:0 8px 24px rgba(15,23,42,0.06)}
    .grinder{position:relative;height:520px;border-radius:12px;display:flex;align-items:center;justify-content:center;overflow:hidden;background:linear-gradient(180deg,#f6fdff,#f7fff9);}
    .bowl{position:absolute;bottom:0;width:300px;height:auto;display:flex;align-items:center;justify-content:center}
    .bowl img{width:100%;height:auto;object-fit:contain}
    .coconut-wrap{position:relative;cursor:pointer;user-select:none}
    img.coconut{width:240px;height:240px;object-fit:contain;transition:transform .08s linear}
    .handle{position:absolute;left:50%;transform:translateX(-50%);top:6px;width:240px;height:40px;border-radius:20px;background:linear-gradient(180deg,#e9e6e1,#d2cfc8);display:flex;align-items:center;justify-content:center;box-shadow:0 6px 18px rgba(0,0,0,0.12)}
    .progress{height:14px;border-radius:10px;background:rgba(15,23,42,0.06);overflow:hidden;margin-top:14px}
    .bar{height:100%;width:0%;background:linear-gradient(90deg,var(--accent),#06b6d4);transition:width .06s linear}
    .stats{display:flex;gap:8px;align-items:center;margin-top:10px}
    .btn{padding:10px 12px;border-radius:10px;border:none;background:var(--accent);color:white;font-weight:600;cursor:pointer}
    .btn.secondary{background:transparent;color:var(--dark);box-shadow:inset 0 0 0 1px rgba(15,23,42,.06)}
    .result{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;flex-direction:column;backdrop-filter:blur(2px);}
    .message{background:rgba(255,255,255,0.92);padding:18px;border-radius:12px;box-shadow:0 10px 30px rgba(15,23,42,.08);text-align:center}
    .confetti{position:absolute;inset:0;pointer-events:none}
    .confetti i{position:absolute;width:10px;height:16px;opacity:0;animation:fall 1400ms linear infinite}
    @keyframes fall{0%{transform:translateY(-40vh) rotate(0);opacity:1}100%{transform:translateY(120vh) rotate(540deg);opacity:0}}
    @media (max-width:820px){.wrap{grid-template-columns:1fr;}.grinder{height:420px}}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card grinder" id="grinder">
      <div class="coconut-wrap" id="hitArea" title="Hold mouse or touch to grind">
        <div class="handle">Hold & Grind</div>
        <img class="coconut" id="coconutImg" src="https://png.pngtree.com/png-clipart/20220130/original/pngtree-original-coconut-cartoon-hand-drawn-tropical-png-image_7238286.png" alt="coconut">
      </div>
      <div class="bowl" aria-hidden="true">
        <img src="https://i.ibb.co/whZvycP1/Adobe-Express-file.png" alt="bowl">
      </div>
      <div class="result" id="result" style="display:none">
        <div class="message">
          <h2 id="resultTitle">Nihalante thenga ready</h2>
          <p id="resultText">mathy mathy</p>
          <div style="margin-top:10px"><button class="btn" id="resetBtn">Grind again</button></div>
        </div>
      </div>
      <div class="confetti" id="confetti"></div>
    </div>
    <aside class="card">
      <h3 style="margin:0 0 8px 0">nihala's thenga â€” Controls</h3>
      <p style="margin:0 0 12px 0;color:rgba(15,23,42,.6)">Hold the coconut (mouse button or touch) to grind. Progress fills. Release to stop.</p>
      <div>
        <label style="font-weight:700">Progress</label>
        <div class="progress"><div class="bar" id="bar"></div></div>
        <div class="stats">
          <div style="font-weight:700" id="percent">0%</div>
          <div style="margin-left:auto;display:flex;gap:8px">
           <!-- <button class="btn secondary" id="howBtn">How it works</button>
            <button class="btn" id="fastBtn">Turbo</button>-->
          </div>
        </div>
      </div>
      <hr style="margin:16px 0;border:none;height:1px;background:rgba(15,23,42,.04)">
      <p style="font-size:13px;color:rgba(15,23,42,.6)">Tip: Press and hold to grind. On mobile, touch & hold.</p>
    </aside>
  </div>
 <script>
    const hitArea = document.getElementById('hitArea');
    const coconut = document.getElementById('coconutImg');
    const bar = document.getElementById('bar');
    const percent = document.getElementById('percent');
    const result = document.getElementById('result');
    const resetBtn = document.getElementById('resetBtn');
    const confetti = document.getElementById('confetti');
    const fastBtn = document.getElementById('fastBtn');
    const howBtn = document.getElementById('howBtn');

    let grinding = false;
    let progress = 0;
    let rotation = 0;
    let raf = null;
    let speedMultiplier = 1;

    function startGrinding(){
      if (grinding) return;
      grinding = true;
      loop();
    }
    function stopGrinding(){
      grinding = false;
      if(raf){cancelAnimationFrame(raf); raf=null}
    }

    function loop(){
      if (!grinding) return;
      rotation += 18 * speedMultiplier;
      coconut.style.transform = `rotate(${rotation}deg)`;
      progress += 0.4 * speedMultiplier;
      if(progress>100) progress=100;
      bar.style.width = progress + '%';
      percent.textContent = Math.round(progress) + '%';
      if(progress>=100){
        stopGrinding();
        showResult();
        return;
      }
      raf = requestAnimationFrame(loop);
    }

    hitArea.addEventListener('mousedown', e=>{ e.preventDefault(); startGrinding(); });
    window.addEventListener('mouseup', e=>{ stopGrinding(); });
    hitArea.addEventListener('touchstart', e=>{ e.preventDefault(); startGrinding(); });
    window.addEventListener('touchend', e=>{ stopGrinding(); });

    fastBtn.addEventListener('click', ()=>{
      speedMultiplier = speedMultiplier===1?2:1;
      fastBtn.textContent = speedMultiplier===1? 'Turbo' : 'Normal';
    });

    howBtn.addEventListener('click', ()=>{
      alert('Hold on the coconut to grind. When progress hits 100%, you win!');
    });

    function showResult(){
      result.style.display = 'flex';
      createConfetti();
    }
    resetBtn.addEventListener('click', ()=>{
      progress = 0; bar.style.width='0%'; percent.textContent='0%'; rotation=0; coconut.style.transform='rotate(0deg)'; result.style.display='none'; confetti.innerHTML='';
    });

    function createConfetti(){
      confetti.innerHTML='';
      const colors = ['#ef4444','#f59e0b','#10b981','#3b82f6','#8b5cf6'];
      for(let i=0;i<18;i++){
        const el = document.createElement('i');
        el.style.left = Math.random()*100 + '%';
        el.style.top = Math.random()*6 + '%';
        el.style.background = colors[i % colors.length];
        el.style.transform = `rotate(${Math.random()*360}deg)`;
        el.style.animationDelay = (Math.random()*400)+'ms';
        el.style.width = (8+Math.random()*8)+'px';
        el.style.height = (12+Math.random()*12)+'px';
        confetti.appendChild(el);
      }
      setTimeout(()=>{ confetti.innerHTML=''; },2200);
    }
  </script>
</body>
</html>
